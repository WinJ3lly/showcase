define(["./device","./router","./collections/slideCollection"],function(t,n,e){const s="course/en/";class i extends Backbone.Controller{async initialize(){var e=window.location.href;this.isDebug=0<=e.indexOf("https://proofing.didasko-online.com/"),this.log={debug:function(...e){e.length&&(e[0]="DEBUG: "+e[0]),console.log.apply(this,e)},warn:function(...e){e.length&&(e[0]="WARNING: "+e[0]),console.log.apply(this,e)},scorm:function(...e){e.length&&(e[0]="SCORM: "+e[0]),console.log.apply(this,e)},error:function(...e){e.length&&(e[0]="ERROR: "+e[0]),console.log.apply(this,e)}},this.device=new t,await this.loadData(),new n}loadJSON(e){return new Promise(t=>{$.ajax({dataType:"json",url:e,cache:!0,success:e=>{t(e)},fail:()=>{throw"main.js: could not load "+e}})})}setReadyStatus(){_.delay(()=>{$("#app").removeClass("u-visibility-hidden"),$("#menu-loading").hide()},500)}async loadData(){this.slides=await this.loadJSON(s+"blocks.json"),this.components=await this.loadJSON(s+"components.json"),this.contentObjects=await this.loadJSON(s+"contentObjects.json"),this.course=await this.loadJSON(s+"course.json"),this.slides.forEach(t=>{t._children=this.components.filter(e=>e._parentId==t._id),t._children=new Backbone.Collection(t._children)}),this.slides=this.slides.filter(e=>!1!==e._isMenuAvailable),this.components=new Backbone.Collection(this.components),this.contentObjects=new Backbone.Collection(this.contentObjects),this.contentObject=this.contentObjects.first(),this.course=new Backbone.Model(this.course),this.slides=new e(this.slides),this.recipes=new Backbone.Collection(this.slides.filter(e=>e.get("_isRecipe"))),this.blocks=new Backbone.Collection(this.slides.filter(e=>!e.get("_isRecipe"))),this.recipes.each(e=>{e.setupData()}),this.blocks.each(e=>{e.setupData()})}}var o,l={compile(e,t){if(!e)return"";e instanceof Object&&(e=e.toString());let n=this;return t&&(n=t.data?.root??t),Handlebars.compile(e)(n)},hyperlink:function(...e){var e=e[e.length-1],t=e.hash,e=(t.content=e?.fn?e.fn():t.href,Handlebars.templates.ddHyperlink(t));return new Handlebars.SafeString(e)},glossary:function(...e){var e=e[e.length-1],t=e.hash;return t.content=e?.fn?e.fn():t.href,new Handlebars.SafeString(t.content)}};for(o in l)l.hasOwnProperty(o)&&Handlebars.registerHelper(o,l[o]);var a=new i;window.Hybrid=a});