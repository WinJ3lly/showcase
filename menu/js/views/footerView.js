define(["./progressView","../models/notesModel","./notesView","libraries/jquery.fullscreen.min"],function(s,e,t){class o extends Backbone.View{events(){return{"click .js-footer-controls-prev":this.onControlsPrevClick,"click .js-footer-controls-next":this.onControlsNextClick,"click .js-footer-controls-notes":this.onControlsNotesClick,"click .js-footer-controls-fs":this.onControlsFSClick}}initialize(){this.update=_.debounce(this.update.bind(this),10),this.render(),this.setupEventListeners()}setupEventListeners(){this.listenTo(this.model.get("_progressModels"),{"change:_isActive":this.onProgressModelActiveChange,"change:_itemActive":this.onProgressModelItemActiveChange}),this.listenTo(Hybrid.notesModel,{"change:_isActive":this.onNotesActiveChange}),$(document).on("fullscreenchange",this.onFullscreenChange.bind(this)).on("fullscreenerror",this.onFullscreenError.bind(this))}onProgressModelActiveChange(e,t){t&&this.update()}onProgressModelItemActiveChange(e,t){this.update()}update(){var e=this.model.getActiveProgressModel(),t=e.getActiveItem(),s=t.get("_index"),e=e.getItemCount();this.$(".js-footer-label-cur").text(s+1),this.$(".js-footer-label-total").text(e),this.$(".js-footer-label-debug").text(t.get("_id")),this.$(".js-footer-controls-prev").toggleClass("is-locked",0==s),this.$(".js-footer-controls-next").toggleClass("is-locked",s==e-1)}onControlsPrevClick(){this.model.setActiveContentPrev()}onControlsNextClick(){this.model.setActiveContentNext()}onNotesActiveChange(e,t){this.$(".js-footer-controls-notes").toggleClass("is-active",t)}render(){var e=this.model.toJSON(),t=Handlebars.templates["hm-footer"];this.$el.html(new Handlebars.SafeString(t(e)).string),this.setupProgressViews(),this.setupNotes(),this.update()}setupNotes(){Hybrid.notesModel=new e({_parent:this.model}),new t({model:Hybrid.notesModel,el:$("#notes")[0]})}setupProgressViews(){var e=this.model.get("_progressModels");let t=this.$(".js-footer-progress");e.each(e=>{e=new s({model:e});t.append(e.$el)})}onControlsNotesClick(){Hybrid.notesModel.toggle(),Hybrid.menuModel.hide()}onControlsFSClick(){$(document).toggleFullScreen()}onFullscreenChange(e){var t=$(document).fullScreen();this.$(".js-footer-controls-fs").toggleClass("is-active",t)}onFullscreenError(e){}}return o});