"use strict";!function(){function e(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].toLowerCase();this[i]=new Number(t),this[i].string=i}}var a={index:0,check:function(e){e[$.expando]||(e[$.expando]=++a.index)},make:function(e,t){return a.check(e),t.guid+"-"+e[$.expando]}},c={TYPE:new e(["onscreen","inview"]),INVIEW_STATES:new e(["none","top","bottom","left","right","both"]),registered:[],shouldReProcess:!0,register:function(e,t,n){var i=o.isLocked(),r=$(e);c.registered.push({id:a.make(e,t),data:t,$element:r,type:n,_onscreen:i?null:I.get(r).uniqueMeasurementId,_hasTriggered:!1}),c.shouldReProcess=!0},unregister:function(e,t,n){for(var i=c.registered,r=a.make(e,t),o=i.length-1;-1<o;o--){var s=i[o];s.id==r&&s.type==n&&(i.splice(o,1),c.shouldReProcess=!0)}},process:function(){var e,t=c.registered;for(c.shouldReProcess=!0;c.shouldReProcess;){if(c.shouldReProcess=!1,0==(e=t.length))return;for(var n=0;n<e;n++){var i=t[n],r=I.get(i.$element),o=void 0!==i._onscreen;if(o&&i._hasTriggered)if(!(i._onscreen!=r.uniqueMeasurementId))continue;switch(i._onscreen=r.uniqueMeasurementId,i._hasTriggered=!0,i.type){case c.TYPE.onscreen:c.processOnScreen(i,r);break;case c.TYPE.inview:c.processInView(i,r)}if(c.shouldReProcess)break}}},processOnScreen:function(e,t){e.$element.trigger("onscreen",t)},processInView:function(e,t){var n=0<=t.percentFromTop&&t.percentFromTop<=100,i=0<=t.percentFromBottom&&t.percentFromBottom<=100,r=0<=t.percentFromLeft&&t.percentFromLeft<=100,o=0<=t.percentFromRight&&t.percentFromRight<=100,n=(n&&i?c.INVIEW_STATES.both:n?c.INVIEW_STATES.top:i?c.INVIEW_STATES.bottom:c.INVIEW_STATES.none).string,i=(r&&o?c.INVIEW_STATES.both:r?c.INVIEW_STATES.left:o?c.INVIEW_STATES.right:c.INVIEW_STATES.none).string,r=[t.onscreen,i,n];e._inviewPreviousState=r,e._measurePreviousState=t,e.$element.trigger("inview",r)}},i={lastStartEvent:0,timeoutHandle:null,intervalDuration:100,hasRaf:!1,start:function(){i.lastStartEvent=(new Date).getTime(),i.repeat()},repeat:function(){i.stop(),i.hasRaf?i.timeoutHandle=requestAnimationFrame(i.main):i.timeoutHandle=setTimeout(i.main,i.intervalDuration)},hasExpired:function(){var e=(new Date).getTime()-i.lastStartEvent;if(!(e<1500))return i.stop(),!0},isThrottled:function(){return!((new Date).getTime()-i.lastMain>i.intervalDuration)},lastMain:(new Date).getTime(),main:function(){i.isThrottled()?i.repeat():(i.lastMain=(new Date).getTime(),i.hasExpired()||(0==c.registered.length?(i.stop(),i.intervalDuration=200):(i.stop(),i.intervalDuration=100),i.repeat(),o.isLocked())||c.process())},stop:function(){null!==i.timeoutHandle&&((i.hasRaf?cancelAnimationFrame:clearTimeout)(i.timeoutHandle),i.timeoutHandle=null)}},o=($.extend($.event.special,{onscreen:{noBubble:!0,add:function(e){c.register(this,e,c.TYPE.onscreen)},remove:function(e){c.unregister(this,e,c.TYPE.onscreen)}},inview:{noBubble:!0,add:function(e){c.register(this,e,c.TYPE.inview)},remove:function(e){c.unregister(this,e,c.TYPE.inview)}}}),$.extend($.fn,{onscreen:function(e){return e?(this.on("onscreen",e),this):I.get(this)},inview:function(e){return e?(this.on("inview",e),this):I.get(this)}}),{locks:[],lock:function(e){o.isLocked(e)||o.locks.push(e)},unlock:function(e){if(o.isLocked(e)){for(var t=0,n=o.locks.length;t<n;t++)if(o.locks[t]==e){o.locks.splice(t,1);break}i.start()}},isLocked:function(e){if(!e)return 0<o.locks.length;for(var t=0,n=o.locks.length;t<n;t++)if(o.locks[t]==e)return!0;return!1}}),t={options:{},config:function(e){"object"==typeof e&&$.extend(t.options,e)}},E=($.inview=$.onscreen=function(){i.start()},$.extend($.inview,o,t),{$el:$(window),height:null,width:null,heightRatio:null,widthRatio:null,resize:function(){E.height=window.innerHeight||E.$el.height(),E.width=window.innerWidth||E.$el.width(),E.heightRatio=100/E.height,E.widthRatio=100/E.width,i.start()}}),I={featureDetect:function(){i.hasRaf=window.requestAnimationFrame&&window.cancelAnimationFrame},get:function(e){if(0!=e.length){var t=e[0];try{r=t.getBoundingClientRect()}catch(e){r={top:0,right:0,bottom:0,left:0,width:0,height:0}}var e=r.height,n=r.width,i=r.top,r=r.left,o=E.height-(i+e),s=E.width-(r+n),a=Math.round(E.heightRatio*i),c=Math.round(E.widthRatio*r),u=Math.round(E.heightRatio*o),h=Math.round(E.widthRatio*s),l=null,l=0<r+n&&s<0&&r<0?n:r<0?n+r:r+n>E.width?E.width-r:n,d=null,f=((d=0<i+e&&o<0&&i<0?e:i<0?e+i:i+e>E.height?E.height-i:e)<0&&(d=0),l<0&&(l=0),Math.round(100/e*d)),g=Math.round(100/n*l),d=Math.round(100/(e*n)*(d*l)),m=e<=0&&n<=0?!1:100<h||100<c||100<u||100<a?!1:!0;if(m=I.isElementHidden(t)?!1:m)for(var p=I.getParents(t),w=0,v=p.length-1;w<v;w++){var T=p[w];if(I.isElementHidden(T)){m=!1;break}if(I.isOutOfBounds(t,T)){m=!1;break}}return{top:i,left:r,bottom:o,right:s,percentFromTop:a,percentFromLeft:c,percentFromBottom:u,percentFromRight:h,percentInview:d,percentInviewHorizontal:g,percentInviewVertical:f,onscreen:m,uniqueMeasurementId:""+i+r+o+s+e+n+E.height+E.width+m,timestamp:(new Date).getTime()}}},getParents:function(e){for(var t,n=[];t=e.parentElement;)n.push(t),e=t;return n},isElementHidden:function(e){return"none"==e.style.display||"hidden"==e.style.visibility||"none"==(e=window.getComputedStyle(e,null)).display||"hidden"==e.visibility},isOutOfBounds:function(e,t){var n,i=t.clientWidth<t.scrollWidth,r=t.clientHeight<t.scrollHeight,i=i||r,r=$(t);return!(!i||"visible"===r.css("overflow"))&&(i=$(e).offset(),r=r.offset(),n=i.top-r.top,i=i.left-r.left,r=n+e.clientHeight,e=i+e.clientWidth,n>=t.clientHeight||i>=t.clientWidth||r<=0||e<=0)}};$(window).on({"touchmove scroll mousedown keydown":i.start,resize:E.resize}),$(I.featureDetect),E.resize()}();